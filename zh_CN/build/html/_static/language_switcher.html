{# Language Switcher Template #}
<div class="language-switcher">
  <select id="lang-selector" class="lang-selector" onchange="switchLanguage()" title="{{ _('Switch language') }}">
    <option value="en" {% if html_context.current_language == 'en' %}selected{% endif %}>English</option>
    <option value="zh_CN" {% if html_context.current_language == 'zh_CN' %}selected{% endif %}>中文</option>
  </select>
</div>

<script>
function switchLanguage() {
  const lang = document.getElementById('lang-selector').value;
  const currentPath = window.location.pathname;
  const pathParts = currentPath.split('/');
  
  if (pathParts[1] === 'en' || pathParts[1] === 'zh_CN') {
    pathParts[1] = lang;
  } else {
    pathParts.unshift(lang);
  }
  
  const newPath = pathParts.join('/');
  window.location.href = newPath;
}

document.addEventListener('DOMContentLoaded', function() {
  const currentPath = window.location.pathname;
  const pathParts = currentPath.split('/');
  const currentLang = pathParts.find(part => part === 'en' || part === 'zh_CN') || 'en';
  
  const selector = document.getElementById('lang-selector');
  if (selector) {
    selector.value = currentLang;
  }
});
</script>
